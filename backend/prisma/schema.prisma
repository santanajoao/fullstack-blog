generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

model Topic {
  id       String @id @default(uuid())
  name     String @unique
  imageUrl String @unique @db.VarChar(300) @map("image_url")

  posts     Post[]
  postTopics PostTopic[]

  @@map("topics")
}

model Account {
  id       String @id @default(uuid())
  username     String
  email    String @unique
  password String
  imageUrl String?

  posts Post[]

  @@map("accounts")
}

model Post {
  id          String   @id @default(uuid())
  imageUrl    String   @db.VarChar(300) @map("image_url")
  title       String   @db.VarChar(70)
  description String   @db.VarChar(200)
  createdAt   DateTime @default(now()) @map("created_at")
  likes       Int      @default(0)

  accountId String @map("user_id")
  account   Account   @relation(fields: [accountId], references: [id])

  topics    Topic[]
  postTopics PostTopic[]

  @@map("posts")
}

model PostTopic {
  topicId String @map("topic_id")
  topic   Topic  @relation(fields: [topicId], references: [id])

  postId String @map("post_id")
  post   Post   @relation(fields: [postId], references: [id])

  @@id([postId, topicId])
  @@map("post_topics")
}
